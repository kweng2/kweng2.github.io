<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1" /><title>How NOT to Parse JSON Response</title><meta name="twitter:card" content="summary" /><meta name="twitter:site" content="@" /><meta name="twitter:title" content="How NOT to Parse JSON Response" /><meta name="twitter:description" content="Bad Practice for Parsing JSON Response"><meta name="description" content="Bad Practice for Parsing JSON Response"><link rel="icon" href="/assets/favicon.png"><link rel="apple-touch-icon" href="/assets/touch-icon.png"><link rel="stylesheet" href="//code.cdn.mozilla.net/fonts/fira.css"><link rel="stylesheet" href="/assets/core.css"><link rel="canonical" href="/notes/Parsing-JSON-response"><link rel="alternate" type="application/atom+xml" title="Everything JS" href="/feed.xml" /></head><body><aside class="logo"> <a href="/"> <img src="http://i.imgur.com/lXpakuT.jpg?1" class="gravatar" width="80px"> </a> <span class="logo-prompt">Back to Home</span></aside><main> <noscript><style> article .footnotes { display: block; }</style></noscript><article><div class="center"><h1>How NOT to Parse JSON Response</h1><time>May 5, 2016</time></div><div class="divider"></div><h3 id="bad-practice-for-parsing-json-response">Bad Practice for Parsing JSON Response</h3><p>It is possible to force an AJAX request to be synchronous via <a href="http://api.jquery.com/jquery.ajax/">jQuery</a>, and would look like this:</p><div class="highlighter-rouge"><pre class="highlight"><code>var jqXHRObject = $.ajax({
  type: "GET",
  url: "/go/isInitialOAuthSignup",
  dataType: "json",
  async: false
};
</code></pre></div><p>This can be very tempting, due to the synchronous nature. And even more conveniently, it returns a <code class="highlighter-rouge">jqXHR</code> object implementing the Promise interface (supported by jQuery since version 1.5).</p><p>And this returned jqXHR for backwards compatibility even exposes a responseText property. So if we’re expecting a JSON response, it may be tempting to do this:</p><div class="highlighter-rouge"><pre class="highlight"><code>JSON.parse(jqXHRObject.responseText)
</code></pre></div><p>What if the server threw and error and didn’t respond with <code class="highlighter-rouge">application/JSON</code>?</p><p>A simple response header check can avoid this problem.</p></article><div class="back"> <a href="/">Back</a></div></main></body></html>